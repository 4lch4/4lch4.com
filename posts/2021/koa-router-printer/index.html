<!doctype html><html><head><title>Koa Router Printer NPM Module</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600"><link rel=stylesheet href=/fontawesome/css/all.min.css><link rel=stylesheet href=/css/colortheme/colortheme.css><link rel=icon type=image/png href=/images/site/favicon_hu21a6a806c4b006128b6b8c10c7e088ee_15784_42x0_resize_box_3.png><meta property="og:title" content="Koa Router Printer NPM Module"><meta property="og:description" content="A brief overview/explanation of my new NPM module that displays the registered routes of an API using Koa."><meta property="og:type" content="article"><meta property="og:url" content="https://4lch4.com/posts/2021/koa-router-printer/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-04T08:25:03+00:00"><meta property="article:modified_time" content="2021-07-04T08:25:03+00:00"><meta name=description content="Koa Router Printer NPM Module"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/avatar_hubc0edc237a662a9609c6ecf2557ff250_452118_42x0_resize_box_3.png alt=Logo>
4lch4's Homepage</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><div id=theme-initialization style=display:none default-theme=system></div><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg src=/icons/moon-svgrepo-com.svg width=20></a><div class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# onclick=enableLightTheme()><img class=menu-icon-center src=/icons/sun-svgrepo-com.svg width=20></a>
<a class="dropdown-item nav-link" href=# onclick=enableDarkTheme()><img class=menu-icon-center src=/icons/moon-svgrepo-com.svg width=20></a>
<a class="dropdown-item nav-link" href=# onclick=useSystemTheme()><img class=menu-icon-center src=/icons/computer-svgrepo-com.svg width=20></a></div></li></ul></div></div><img src=/images/site/avatar_hubc0edc237a662a9609c6ecf2557ff250_452118_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/avatar_hubc0edc237a662a9609c6ecf2557ff250_452118_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><i class="fas fa-plus-circle"></i><a href=/posts/2022/>2022</a><ul><li><a href=/posts/2022/new-4lch4.com/ title="My New 4lch4.com Website">My New 4lch4.com Website</a></li><li><a href=/posts/2022/how-my-website-was-hacked/ title="How My Website Was Hacked">How My Website Was Hacked</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/2021/>2021</a><ul class=active><li><a href=/posts/2021/dont-rebuild-docker-locally/ title="Don't Rebuild Docker Locally">Don't Rebuild Docker Locally</a></li><li><a href=/posts/2021/hello-world/ title="Hello World">Hello World</a></li><li><a class=active href=/posts/2021/koa-router-printer/ title="Koa Router Printer">Koa Router Printer</a></li><li><a href=/posts/2021/perfect-keyboard/ title="My Perfect Keyboard">My Perfect Keyboard</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/2018/>2018</a><ul><li><a href=/posts/2018/new-node-modules-w-powershell/ title="New Node Modules">New Node Modules</a></li><li><a href=/posts/2018/hello-world-in-powershell/ title="PowerShell Hello World">PowerShell Hello World</a></li><li><a href=/posts/2018/solving-the-fizzbuzz-problem-in-powershell/ title="Solving Fizzbuzz">Solving Fizzbuzz</a></li><li><a href=/posts/2018/how-to-uniquify-your-powershell-console/ title="Uniquify PowerShell">Uniquify PowerShell</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/site/avatar_hubc0edc237a662a9609c6ecf2557ff250_452118_120x120_fit_box_3.png alt="Author Image"><h5 class=author-name>Devin Leaman</h5><p>Sunday, July 4, 2021</p></div><div class=title><h1>Koa Router Printer NPM Module</h1></div><div class=taxonomy-terms><ul><li class=rounded><a href=/tags/npm class="btn, btn-sm">NPM</a></li><li class=rounded><a href=/tags/node.js class="btn, btn-sm">Node.js</a></li><li class=rounded><a href=/tags/typescript class="btn, btn-sm">TypeScript</a></li><li class=rounded><a href=/tags/koa class="btn, btn-sm">Koa</a></li><li class=rounded><a href=/tags/koa-router class="btn, btn-sm">Koa-Router</a></li><li class=rounded><a href=/tags/libs class="btn, btn-sm">Libs</a></li></ul></div><div class=post-content id=post-content><p>For the longest time, when creating an API with TypeScript/Node.js, I would spend a god awful amount of time finding just the right framework. Recently I decided to pick one and stick with it, so I had to find one to use. I landed on Hapi and used that for quite some time, including projects at my full time job. Eventually, I began to have issues with Hapi in TypeScript so I began poking around for a framework with better TypeScript support. That was when I found Koa, from the makers of Express.</p><p>I now use Koa for all of my API needs, but there was a plugin I used with my Hapi APIs that I missed more than anything. That simple plugin would spit out a table of routes/methods that my API was listening to, based on what was registered previously. I dug around on Google/DuckDuckGo for a while and couldn&rsquo;t find anything that fit my needs/wants. As a result, I ended up building my own module to do just that and am now publishing it for anyone else to use.</p><h2 id=key-info>Key Info</h2><p>The full name of the module is <code>@4lch4/koa-router-printer</code>, and since that&rsquo;s a bit of a mouthful, I&rsquo;ll be referring to it as KRP.</p><p>Naming aside, the module requires that you add your routes/paths with the <code>@koa/router</code> module, as that is what I use to determine what routes are registered. Lastly, it will only work if you register your routes <em>before</em> calling the KRP module.</p><h2 id=example>Example</h2><p>Enough talk; here are some samples of how it works and the available options. First up, the defaults.</p><h3 id=defaults>Defaults</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Printer</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@4lch4/koa-router-printer&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Koa</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;koa&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Router</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@koa/router&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Router</span>({ <span style=color:#a6e22e>prefix</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/api/v1&#39;</span> })
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#66d9ef>get</span>(<span style=color:#e6db74>&#39;/hello&#39;</span>, <span style=color:#a6e22e>ctx</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>body</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;OK&#39;</span>
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Koa</span>()
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>routes</span>())
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>allowedMethods</span>())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Printer</span>(<span style=color:#a6e22e>app</span>)
</span></span></code></pre></div><p>If you use the module as shown above with no custom options, a table like so will be displayed:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>jisodl0 at macx-382fq05p in ~/Development/alcha/playground/krp-tester 
</span></span><span style=display:flex><span>$ ts-node src/index.ts         
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>┌───────────────┬───────────┐
</span></span><span style=display:flex><span>│ Path          │ Method(s) │
</span></span><span style=display:flex><span>├───────────────┼───────────┤
</span></span><span style=display:flex><span>│ /api/v1/hello │    GET    │
</span></span><span style=display:flex><span>└───────────────┴───────────┘
</span></span></code></pre></div><h3 id=custom-options>Custom Options</h3><p>Alternatively, you can pass an options object to the Printer function and change what is displayed:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#a6e22e>Printer</span>(<span style=color:#a6e22e>app</span>, {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Displays the HEAD method if assigned to a route.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>displayHead</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Display the prefix in the Path column.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>displayPath</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Results in:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>jisodl0 at macx-382fq05p in ~/Development/alcha/playground/krp-tester 
</span></span><span style=display:flex><span>$ ts-node src/index.ts
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>┌───────────────┬─────────────┐
</span></span><span style=display:flex><span>│ Path          │  Method(s)  │
</span></span><span style=display:flex><span>├───────────────┼─────────────┤
</span></span><span style=display:flex><span>│ /api/v1/hello │ HEAD -- GET │
</span></span><span style=display:flex><span>└───────────────┴─────────────┘
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>So, to wrap things up. If you&rsquo;re interested in using KRP, download it and use it as mentioned above. If you have any comments, criticisms, or concerns, please reach out to me directly or by posting an Issue to the GitHub repository.</p></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn btn-sm facebook-btn" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fkoa-router-printer%2f" target=_blank><i class="fab fa-facebook"></i></a>
<a class="btn btn-sm twitter-btn" href="https://twitter.com/share?url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fkoa-router-printer%2f&text=Koa%20Router%20Printer%20NPM%20Module&via=4lch4%27s%20Homepage" target=_blank><i class="fab fa-twitter"></i></a>
<a class="btn btn-sm reddit-btn" href="https://reddit.com/submit?url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fkoa-router-printer%2f&title=Koa%20Router%20Printer%20NPM%20Module" target=_blank><i class="fab fa-reddit"></i></a>
<a class="btn btn-sm tumblr-btn" href="https://www.tumblr.com/share/link?url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fkoa-router-printer%2f&name=Koa%20Router%20Printer%20NPM%20Module" target=_blank><i class="fab fa-tumblr"></i></a>
<a class="btn btn-sm pocket-btn" href="https://getpocket.com/save?url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fkoa-router-printer%2f&title=Koa%20Router%20Printer%20NPM%20Module" target=_blank><i class="fab fa-get-pocket"></i></a>
<a class="btn btn-sm linkedin-btn" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fkoa-router-printer%2f&title=Koa%20Router%20Printer%20NPM%20Module" target=_blank><i class="fab fa-linkedin"></i></a>
<a class="btn btn-sm diaspora-btn" href="https://share.diasporafoundation.org/?title=Koa%20Router%20Printer%20NPM%20Module&url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fkoa-router-printer%2f" rel=nofollow target=_blank><i class="fab fa-diaspora"></i></a>
<a class="btn btn-sm mastodon-btn" href="https://mastodon.social/share?text=Koa%20Router%20Printer%20NPM%20Module - https%3a%2f%2f4lch4.com%2fposts%2f2021%2fkoa-router-printer%2f" target=_blank><i class="fab fa-mastodon"></i></a>
<a class="btn btn-sm whatsapp-btn" href="https://api.whatsapp.com/send?text=Koa%20Router%20Printer%20NPM%20Module https%3a%2f%2f4lch4.com%2fposts%2f2021%2fkoa-router-printer%2f" target=_blank><i class="fab fa-whatsapp"></i></a>
<a class="btn btn-sm email-btn" href="mailto:?subject=Koa%20Router%20Printer%20NPM%20Module&body=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fkoa-router-printer%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://git.4lch4.io/4lch4/4lch4.com/edit/main/content/posts/2021/koa-router-printer.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/2021/hello-world/ title="Hello World!" class="btn btn-outline-info"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>Hello World!</div></a></div><div class="col-md-6 next-article"><a href=/posts/2021/perfect-keyboard/ title="How I Made the Perfect Keyboard Mine" class="btn btn-outline-info"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>How I Made the Perfect Keyboard Mine</div></a></div></div><hr><script src=https://giscus.app/client.js data-repo=4lch4/4lch4.com-toha data-repo-id=R_kgDOH6UVFg data-category=Announcements data-category-id=DIC_kwDOH6UVFs4CRJHt data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=dark data-lang crossorigin=anonymous async></script></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#key-info>Key Info</a></li><li><a href=#example>Example</a><ul><li><a href=#defaults>Defaults</a></li><li><a href=#custom-options>Custom Options</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#accomplishments>Achievements</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:hey@4lch4.email target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>hey@4lch4.email</span></a></li><li><a href=https://github.com/4lch4 target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>4lch4</span></a></li><li><a href=https://www.linkedin.com/in/devin-leaman-49622429 target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Devin Leaman</span></a></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>Liability Notice:</strong> This website and the theme it uses are published under the MIT license. So, you can use it for
non-commercial, commercial, or private uses. You can modify or distribute the theme without
requiring any permission from the theme author. However, the theme author does not provide any
warranty or takes any liability for any issue with the theme. For further information, I recommend
you refer to the following URL: <a href=https://opensource.org/licenses/MIT>https://opensource.org/licenses/MIT</a></p></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://git.4lch4.io/4lch4/Toha-Theme target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">Copyright © 2022 4lch4</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script type=text/javascript src=/js/darkreader.js></script>
<script type=text/javascript src=/js/darkmode-darkreader.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script>
<script src=/js/single.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>