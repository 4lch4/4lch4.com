<!doctype html><html><head><title>Don't Rebuild Your Docker Image Locally</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600"><link rel=stylesheet href=/fontawesome/css/all.min.css><link rel=stylesheet href=/css/colortheme/colortheme.css><link rel=icon type=image/png href=/images/site/favicon_hu21a6a806c4b006128b6b8c10c7e088ee_15784_42x0_resize_box_3.png><meta property="og:title" content="Don't Rebuild Your Docker Image Locally"><meta property="og:description" content="Instead of rebuilding your Docker image every time you make a change, it's much faster to mount your local directory to the image and then restart it.
"><meta property="og:type" content="article"><meta property="og:url" content="https://4lch4.com/posts/2021/dont-rebuild-docker-locally/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-10-05T10:58:18-05:00"><meta property="article:modified_time" content="2021-10-05T10:58:18-05:00"><meta name=description content="Instead of rebuilding your Docker image every time you make a change, it's much faster to mount your local directory to the image and then restart it.
"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/><img src=/images/site/avatar_hubc0edc237a662a9609c6ecf2557ff250_452118_42x0_resize_box_3.png alt=Logo>
4lch4's Homepage</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><div id=theme-initialization style=display:none default-theme=system></div><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg src=/icons/moon-svgrepo-com.svg width=20></a><div class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# onclick=enableLightTheme()><img class=menu-icon-center src=/icons/sun-svgrepo-com.svg width=20></a>
<a class="dropdown-item nav-link" href=# onclick=enableDarkTheme()><img class=menu-icon-center src=/icons/moon-svgrepo-com.svg width=20></a>
<a class="dropdown-item nav-link" href=# onclick=useSystemTheme()><img class=menu-icon-center src=/icons/computer-svgrepo-com.svg width=20></a></div></li></ul></div></div><img src=/images/site/avatar_hubc0edc237a662a9609c6ecf2557ff250_452118_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/avatar_hubc0edc237a662a9609c6ecf2557ff250_452118_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><a href=/posts/introduction/ title=Introduction>Introduction</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/2018/>2018</a><ul><li><a href=/posts/2018/new-node-modules-w-powershell/ title="New Node Modules">New Node Modules</a></li><li><a href=/posts/2018/hello-world-in-powershell/ title="PowerShell Hello World">PowerShell Hello World</a></li><li><a href=/posts/2018/solving-the-fizzbuzz-problem-in-powershell/ title="Solving Fizzbuzz">Solving Fizzbuzz</a></li><li><a href=/posts/2018/how-to-uniquify-your-powershell-console/ title="Uniquify PowerShell">Uniquify PowerShell</a></li></ul></li><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/2021/>2021</a><ul class=active><li><a class=active href=/posts/2021/dont-rebuild-docker-locally/ title="Don't Rebuild Docker Locally">Don't Rebuild Docker Locally</a></li><li><a href=/posts/2021/hello-world/ title="Hello World">Hello World</a></li><li><a href=/posts/2021/koa-router-printer/ title="Koa Router Printer">Koa Router Printer</a></li><li><a href=/posts/2021/perfect-keyboard/ title="My Perfect Keyboard">My Perfect Keyboard</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/2022/>2022</a><ul><li><a href=/posts/2022/how-my-website-was-hacked/ title="How My Website Was Hacked">How My Website Was Hacked</a></li></ul></li><li><i class="fas fa-plus-circle"></i><a href=/posts/category/>Category</a><ul><li><i class="fas fa-plus-circle"></i><a href=/posts/category/sub-category/>Sub-Category</a><ul><li><a href=/posts/category/sub-category/rich-content/ title="Rich Content">Rich Content</a></li></ul></li></ul></li><li><a href=/posts/markdown-sample/ title="Markdown Sample">Markdown Sample</a></li><li><a href=/posts/shortcodes/ title="Shortcodes Sample">Shortcodes Sample</a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/site/avatar_hubc0edc237a662a9609c6ecf2557ff250_452118_120x120_fit_box_3.png alt="Author Image"><h5 class=author-name>Devin Leaman</h5><p>Tuesday, October 5, 2021</p></div><div class=title><h1>Don't Rebuild Your Docker Image Locally</h1></div><div class=taxonomy-terms><ul></ul></div><div class=post-content id=post-content><p>A few weeks ago, I came across <a href=https://vsupalov.com/rebuilding-docker-image-development/>this article</a> titled &ldquo;You Don&rsquo;t Need to Rebuild Your Development Docker Image on Every Code Change.&rdquo; As I use Docker for most of my projects, this piqued my interest. The gist of it is, you can mount your local development directory to a Docker image instead of copying your source code to the image and building it.</p><p>While you wouldn&rsquo;t want to do this for anything other than local development, it does help <em>drastically</em> with making changes and seeing them reflect as quickly as possible.</p><h2 id=key-words>Key Words</h2><p>To properly discuss this new method, there&rsquo;s a few words/phrases that are helpful to know:</p><ul><li>OG/Original Method<ul><li>This refers to the original method of building a Docker image from scratch by copying your source code and executing the build commands.</li></ul></li><li>Mounting<ul><li>This method is when you mount your local development directory to the Docker container.</li></ul></li></ul><h2 id=example>Example</h2><p>I have an API called <a href=https://github.com/4lch4/Ansel>Ansel</a> that serves as a gateway to images I have stored in a DigitalOcean Spaces bucket. It&rsquo;s written in TypeScript and relatively lightweight, so doing a complete build of my Docker image takes just under 50 seconds. I&rsquo;ll use this repo to demonstrate just how much faster it can be.</p><h3 id=initial-dockerfile>Initial Dockerfile</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Dockerfile data-lang=Dockerfile><span style=display:flex><span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> node:16</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /usr/src/app</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> . .<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> npm i<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> npm run package<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>EXPOSE</span><span style=color:#e6db74> 3000</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>CMD</span> [<span style=color:#e6db74>&#34;npm&#34;</span>, <span style=color:#e6db74>&#34;start&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><h3 id=initially-building-the-image>Initially Building the Image</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker build -t 4lch4/ansel .
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>+<span style=color:#f92672>]</span> Building 46.4s <span style=color:#f92672>(</span>10/10<span style=color:#f92672>)</span> FINISHED
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>internal<span style=color:#f92672>]</span> load build definition from Dockerfile                                                              0.0s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; transferring dockerfile: 37B                                                                               0.0s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>internal<span style=color:#f92672>]</span> load .dockerignore                                                                                 0.0s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; transferring context: 34B                                                                                  0.0s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>internal<span style=color:#f92672>]</span> load metadata <span style=color:#66d9ef>for</span> docker.io/library/node:16                                                        0.5s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>1/5<span style=color:#f92672>]</span> FROM docker.io/library/node:16@sha256:a1118930ecc77da1ce4b19ac8c17adf386b7bb36b348111437f1cfca5a5c9fd7  0.0s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; resolve docker.io/library/node:16@sha256:a1118930ecc77da1ce4b19ac8c17adf386b7bb36b348111437f1cfca5a5c9fd7  0.0s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>internal<span style=color:#f92672>]</span> load build context                                                                                 0.0s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; transferring context: 9.26kB
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; CACHED <span style=color:#f92672>[</span>2/5<span style=color:#f92672>]</span> WORKDIR /usr/src/app                                                                             0.0s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>3/5<span style=color:#f92672>]</span> COPY . .                                                                                                0.1s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>4/5<span style=color:#f92672>]</span> RUN npm i                                                                                               27.8s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>[</span>5/5<span style=color:#f92672>]</span> RUN npm run package                                                                                     13.6s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; exporting to image                                                                                            4.3s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; exporting layers                                                                                           4.2s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; writing image sha256:0134eb71af8bd2d12073779b02bc91fdf66b1c4774995f27833672d5476b2c7a                      0.0s
</span></span><span style=display:flex><span><span style=color:#f92672>=</span>&gt; <span style=color:#f92672>=</span>&gt; naming to docker.io/4lch4/ansel                                                                            0.0s
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Use <span style=color:#e6db74>&#39;docker scan&#39;</span> to run Snyk tests against images to find vulnerabilities and learn how to fix them
</span></span><span style=display:flex><span>✨  Done in 47.59s
</span></span></code></pre></div><p>At this point, we can start a container using the new image and begin making requests. Overall, 50 seconds doesn&rsquo;t sound like much, but it can add up over time, and some apps take even longer to build.</p><h3 id=building-w-a-mounted-directory>Building w/ a Mounted Directory</h3><p>Now let&rsquo;s see how fast it is to get the same results with a mounted directory. First up, we need to change our Dockerfile not to copy any code or run any build commands. We do this because the code will be built locally and just &ldquo;attached&rdquo; to the Docker container.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Dockerfile data-lang=Dockerfile><span style=display:flex><span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> node:16</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /usr/src/app</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># COPY . .</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># RUN npm i</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># RUN npm run package</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>EXPOSE</span><span style=color:#e6db74> 3000</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>CMD</span> [<span style=color:#e6db74>&#34;npm&#34;</span>, <span style=color:#e6db74>&#34;start&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>docker stop ansel
</span></span><span style=display:flex><span>docker rm ansel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>yarn package
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker run -d <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -e AWS_ACCESS_KEY_ID<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;AWS_ACCESS_KEY_ID&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -e AWS_SECRET_ACCESS_KEY<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;AWS_SECRET_ACCESS_KEY&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -e APP_NAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Ansel&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -e VERSION<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1.0.0&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -e PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>3000</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -e API_PREFIX<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/api/v1&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -e SPACES_ENDPOINT<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;SPACES_ENDPOINT&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -e BUCKET_NAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ansel&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -e IMG_BASE_URL<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://ansel.4lch4.tech&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --mount <span style=color:#e6db74>&#34;type=bind,source=</span><span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span><span style=color:#e6db74>,target=/usr/src/app&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -p 3000:3000 --name ansel 4lch4/ansel:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>./mounted.sh  8.81s user 0.53s system 119% cpu 7.793 total
</span></span></code></pre></div><p>As you can see, we went from roughly 50 seconds to 8 seconds to restart a Docker container with our latest changes, which is a <em>huge</em> improvement.</p><h2 id=why-does-this-speed-things-up>Why Does This Speed Things Up?</h2><p>This method is so much faster because we&rsquo;re not copying the code to the image and transpiling it. Instead, we&rsquo;re just attaching the local directory to the container where the transpiled code already exists. This means that our code is already built, and we don&rsquo;t have to worry about rebuilding it within the image.</p><p>Consider the following scenario using the Ansel repository/API. Our end goal is to add a new route called /error that returns a 500 for testing purposes:</p><ol><li>We cloned the repo and need to make sure it&rsquo;ll run.</li><li>Run <code>yarn docker:build</code>, which runs the Docker build command.<ol><li>This will create an image that copies over your code and runs the build/package commands.</li></ol></li><li>Next, run <code>yarn docker:start</code> and the container spins up.</li><li>Now, we make a test call (curl localhost:3000/API/v1/health) to ensure the app is online.</li><li>We can open a terminal and execute <code>tsc --watch</code> to build our code as we work on it, meaning we don&rsquo;t have to wait or run another command after making changes.</li><li>To get these new changes to the Docker container, you have two options:<ol><li>Use the original method of copying over your code and running build commands.</li><li>Use a mount to attach your local directory where the code from <code>tsc --watch</code> is output.</li></ol></li></ol><p>If we use the original method, Docker has to copy your code and run all the build commands needed to get working code.</p><p>If we use the mounting method, then we only have to restart the container and make sure the new container has our local directory mounted. This means we don&rsquo;t have to run a <code>docker build</code> command, just the starting ones.</p><h2 id=whats-the-difference-in-commands>What&rsquo;s The Difference in Commands?</h2><p>There&rsquo;s not much difference between running a container using the OG method and the mounting method. Thankfully, they both use the <code>docker run</code> command; there&rsquo;s just an extra parameter you need to provide for mounting.</p><h3 id=og-method>OG Method</h3><p>For the OG method, we&rsquo;d run the following commands to restart the container with the latest code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>docker stop ansel
</span></span><span style=display:flex><span>docker rm ansel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker build -t username/app-name:latest .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker run -d -p 3000:3000 --name ansel username/app-name:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker logs Ansel --follow
</span></span></code></pre></div><h3 id=mounted-method>Mounted Method</h3><p>For the mounted method, we only need to provide the <code>--mount</code> parameter to the run command, which looks like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>docker stop ansel
</span></span><span style=display:flex><span>docker rm ansel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker build -t username/app-name:latest .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker run --mount<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;type=bind,source=</span><span style=color:#66d9ef>$(</span>pwd<span style=color:#66d9ef>)</span><span style=color:#e6db74>,target=/usr/src/app&#34;</span> -d -p 3000:3000 --name ansel username/app-name:latest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker logs Ansel --follow
</span></span></code></pre></div><p>The critical part of this parameter is the source and target values, so let&rsquo;s break it down.</p><h4 id=source>Source</h4><p>The source, in this case, is the current directory since this command is run from the root directory of my project. If your project is in a subdirectory, you will reference it like <code>source=$(pwd)/subdirectory</code>. If this isn&rsquo;t set correctly, the Docker container will look in the wrong spot for your source code.</p><h4 id=target>Target</h4><p>The target is where Docker will mount your files within the container. If you remember, in our Dockerfile, we use <code>WORKDIR /usr/src/app</code>, so we want to make sure our code/directory is mounted to the exact location. Because of this, we set the target value to <code>/usr/src/app</code>, so don&rsquo;t forget to make sure this lines up with your Dockerfile.</p><p>If you have any questions or suggestions, please don&rsquo;t hesitate to reach out! You can find me on several sites, all of which I link to on my <a href=https://4lch4.social>socials site</a>.</p></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn btn-sm facebook-btn" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fdont-rebuild-docker-locally%2f" target=_blank><i class="fab fa-facebook"></i></a>
<a class="btn btn-sm twitter-btn" href="https://twitter.com/share?url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fdont-rebuild-docker-locally%2f&text=Don%27t%20Rebuild%20Your%20Docker%20Image%20Locally&via=4lch4%27s%20Homepage" target=_blank><i class="fab fa-twitter"></i></a>
<a class="btn btn-sm reddit-btn" href="https://reddit.com/submit?url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fdont-rebuild-docker-locally%2f&title=Don%27t%20Rebuild%20Your%20Docker%20Image%20Locally" target=_blank><i class="fab fa-reddit"></i></a>
<a class="btn btn-sm tumblr-btn" href="https://www.tumblr.com/share/link?url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fdont-rebuild-docker-locally%2f&name=Don%27t%20Rebuild%20Your%20Docker%20Image%20Locally&description=Instead%20of%20rebuilding%20your%20Docker%20image%20every%20time%20you%20make%20a%20change%2c%20it%27s%20much%20faster%20to%20mount%20your%20local%20directory%20to%20the%20image%20and%20then%20restart%20it.%0a" target=_blank><i class="fab fa-tumblr"></i></a>
<a class="btn btn-sm pocket-btn" href="https://getpocket.com/save?url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fdont-rebuild-docker-locally%2f&title=Don%27t%20Rebuild%20Your%20Docker%20Image%20Locally" target=_blank><i class="fab fa-get-pocket"></i></a>
<a class="btn btn-sm linkedin-btn" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fdont-rebuild-docker-locally%2f&title=Don%27t%20Rebuild%20Your%20Docker%20Image%20Locally" target=_blank><i class="fab fa-linkedin"></i></a>
<a class="btn btn-sm diaspora-btn" href="https://share.diasporafoundation.org/?title=Don%27t%20Rebuild%20Your%20Docker%20Image%20Locally&url=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fdont-rebuild-docker-locally%2f" rel=nofollow target=_blank><i class="fab fa-diaspora"></i></a>
<a class="btn btn-sm mastodon-btn" href="https://mastodon.social/share?text=Don%27t%20Rebuild%20Your%20Docker%20Image%20Locally - https%3a%2f%2f4lch4.com%2fposts%2f2021%2fdont-rebuild-docker-locally%2f" target=_blank><i class="fab fa-mastodon"></i></a>
<a class="btn btn-sm whatsapp-btn" href="https://api.whatsapp.com/send?text=Don%27t%20Rebuild%20Your%20Docker%20Image%20Locally https%3a%2f%2f4lch4.com%2fposts%2f2021%2fdont-rebuild-docker-locally%2f" target=_blank><i class="fab fa-whatsapp"></i></a>
<a class="btn btn-sm email-btn" href="mailto:?subject=Don%27t%20Rebuild%20Your%20Docker%20Image%20Locally&body=https%3a%2f%2f4lch4.com%2fposts%2f2021%2fdont-rebuild-docker-locally%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/4lch4/4lch4.com/edit/main/content/posts/2021/dont-rebuild-docker-locally.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/2018/how-to-uniquify-your-powershell-console/ title="How to Uniquify Your PowerShell Console" class="btn btn-outline-info"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>How to Uniquify Your PowerShell Console</div></a></div><div class="col-md-6 next-article"><a href=/posts/2021/hello-world/ title="Hello World!" class="btn btn-outline-info"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Hello World!</div></a></div></div><hr><script src=https://giscus.app/client.js data-repo=4lch4/4lch4.com-toha data-repo-id=R_kgDOH6UVFg data-category=Announcements data-category-id=DIC_kwDOH6UVFs4CRJHt data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=dark data-lang crossorigin=anonymous async></script></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#key-words>Key Words</a></li><li><a href=#example>Example</a><ul><li><a href=#initial-dockerfile>Initial Dockerfile</a></li><li><a href=#initially-building-the-image>Initially Building the Image</a></li><li><a href=#building-w-a-mounted-directory>Building w/ a Mounted Directory</a></li></ul></li><li><a href=#why-does-this-speed-things-up>Why Does This Speed Things Up?</a></li><li><a href=#whats-the-difference-in-commands>What&rsquo;s The Difference in Commands?</a><ul><li><a href=#og-method>OG Method</a></li><li><a href=#mounted-method>Mounted Method</a><ul><li><a href=#source>Source</a></li><li><a href=#target>Target</a></li></ul></li></ul></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=https://4lch4.com#accomplishments>Achievements</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:hey@4lch4.email target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>hey@4lch4.email</span></a></li><li><a href=https://github.com/4lch4 target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>4lch4</span></a></li><li><a href=https://www.linkedin.com/in/devin-leaman-49622429 target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Devin Leaman</span></a></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>Liability Notice:</strong> This website and the theme it uses are published under the MIT license. So, you can use it for
non-commercial, commercial, or private uses. You can modify or distribute the theme without
requiring any permission from the theme author. However, the theme author does not provide any
warranty or takes any liability for any issue with the theme. For further information, I recommend
you refer to the following URL: <a href=https://opensource.org/licenses/MIT>https://opensource.org/licenses/MIT</a></p></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://git.4lch4.io/4lch4/Toha-Theme target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">Copyright © 2022 4lch4</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script type=text/javascript src=/js/darkreader.js></script>
<script type=text/javascript src=/js/darkmode-darkreader.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script>
<script src=/js/single.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>